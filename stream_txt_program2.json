{"_id": "/program/fee10c5a-f656-11ec-b939-0242ac122333", "uri": "/program/fee10c5a-f656-11ec-b939-0242ac122333", "publisher": null, "level": "intermedio", "rights": "Attribution-ShareAlike 4.0 International", "description": "Atrapa la excepci\u00f3n que surge al guardar el archivo", "icon": "coffee", "author": "mariosky@gmail.com", "tags": ["completa", "csharp"], "image_url": null, "title": "Atrapa una excepci\u00f3n de IO", "type": "prog", "lang": "csharp", "external_url": "https://sfo2.digitaloceanspaces.com/evo/uno/autores/mario.jpg", "unit_test": "public class UnitTest1\n{\n    [Fact]\n    public void SaveProductsTxt()\n    {\n      string data = \"data\";\n      string file = \"data.txt\";\n\n      using (StringWriter s = new StringWriter())\n            {\n                Console.SetOut(s);\n                \n                FileSaver.SaveToText(data, file);\n\n                var result = s.ToString().Trim().Replace(\"\\r\",\"\");\n                Assert.Equal(\"El archivo no existe\", result );\n            }\n    }\n\n}\n", "initial_code": "using System.Text;\n\npublic class FileSaver\n{\n    public static void SaveToText(string data, string file)\n    {\n        FileStream fs = null;\n        try {\n            fs =  new FileStream(file, FileMode.Open, FileAccess.Write);\n            using(StreamWriter txtOut = new StreamWriter(fs, Encoding.UTF8, 512))\n            {\n               txtOut.Write(data); \n            }\n        }\n        \n        finally {\n            if (fs != null)\n                fs.Dispose();\n        }\n    }\n}\n", "instructions": "<h3>Atrapa la excepci\u00f3n</h3>\n<p>El c\u00f3digo inicial tiene un error, el programador quiere\nabrir el archivo que llega como par\u00e1metro, pero el \narchivo no existe. Cuando sucede esto se dispara \nla excepci\u00f3n <code>System.IO.FileNotFoundException</code>. </p>\n<p>Agrega el bloque necesario para atrapar esta \nexcepci\u00f3n, dentro de ella simplemente imprime a la \nconsola el mensaje: <code>\"El archivo no existe\"</code>.</p>\n<p>No es necesario modificar otra parte del programa.</p>", "reg_exp": ""}